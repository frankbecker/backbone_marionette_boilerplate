var Imgs_model=Backbone.Model.extend({defaults:{description_one:"caesar salad",description_two:"ravioli",description_three:"cheesecake"}}),View_A=Backbone.Marionette.View.extend({tagName:"div",className:"View_A",template:Handlebars.compile($("#View_A-template").html()),events:{"click a":"tab_selected"},initialize:function(a){this.model=window.model=new Imgs_model,this.listenTo(App,"whatever",this.onDestroy),this.listenTo(this.model,"change",this.render),this.id=a.id,this.my_variable=App.my_variable},render:function(){this.$el.html(this.template(this.model.toJSON())),this.select_proper_index()},select_proper_index:function(){if(this.id){var a=this;setTimeout(function(){$("a[data-id = "+a.id+" ]",a.el).click()},200)}},tab_selected:function(a){var b=$(a.currentTarget).attr("data-id");this.trigger("tab:selected",b)},onDestroy:function(){console.log("Destroying View_A")}}),View_B=Backbone.Marionette.View.extend({tagName:"div",className:"View_B",template:Handlebars.compile($("#View_B-template").html()),events:{},initialize:function(a){this.id=a.id,this.images=["pic_1.jpg","pic_2.jpg","pic_3.jpg"]},render:function(){this.$el.html(this.template),this.load_image()},show_image:function(a){a=parseInt(a,10),$("img",this.el).attr("src","img/"+this.images[a])},load_image:function(){var a=this.id?this.id:0;$("img",this.el).attr("src","img/"+this.images[a])},onDestroy:function(){console.log("Destroying View_B")}}),MainView=Backbone.Marionette.LayoutView.extend({tagName:"div",className:"MainView",regions:{left_region:"#left_region",right_region:"#right_region"},template:Handlebars.compile($("#main-template").html()),events:{"click button":"switch_views"},initialize:function(a){this.id=a.id,this.switched=!1,this.view_a=null,this.view_b=null,this.create_views_and_bind_events()},render:function(){this.$el.html(this.template),this.show_views()},show_views:function(){this.left_region.show(this.view_a),this.right_region.show(this.view_b)},create_views_and_bind_events:function(){var a=this;this.view_a=new View_A({id:this.id}),this.view_b=new View_B({id:this.id}),this.view_a.on("tab:selected",function(b){a.change_image(b)})},switch_views:function(){this.create_views_and_bind_events(),this.switched?(this.left_region.show(this.view_a),this.right_region.show(this.view_b)):(this.left_region.show(this.view_b),this.right_region.show(this.view_a)),this.switched=!this.switched},change_image:function(a){this.view_b.show_image(a)},onDestroy:function(){console.log("Destroying MainView")}}),HeaderView=Marionette.View.extend({tagName:"div",className:"HeaderView",template:Handlebars.compile($("#header-template").html()),events:{},initialize:function(){},render:function(){this.$el.html(this.template)},onDestroy:function(){console.log("Destroying HeaderView")}}),FooterView=Marionette.View.extend({tagName:"div",className:"FooterView",template:Handlebars.compile($("#footer-template").html()),events:{},initialize:function(){},render:function(){this.$el.html(this.template)},onDestroy:function(){console.log("Destroying FooterView")}}),HomeView=Marionette.View.extend({tagName:"div",className:"HomeView",template:Handlebars.compile($("#home_view-template").html()),events:{},initialize:function(){},render:function(){this.$el.html(this.template)},onDestroy:function(){console.log("Destroying HomeView")}}),ImagesView=Marionette.View.extend({tagName:"div",className:"ImagesView",template:Handlebars.compile($("#Images_view-template").html()),events:{},initialize:function(){},render:function(){this.$el.html(this.template)},onDestroy:function(){console.log("Destroying ImagesView")}}),Router=Backbone.Router.extend({routes:{"":"home",profile:"profile","profile/:id":"profile",images:"images"},home:function(){App.main_region.show(new HomeView)},profile:function(a){a&&(a=parseInt(a,10));var b={id:a};App.main_region.show(new MainView(b))},images:function(){App.main_region.show(new ImagesView)}}),App=new Backbone.Marionette.Application({regions:{header_region:"#header-region",main_region:"#main-region",footer_region:"#footer-region"}});App.addInitializer(function(){App.header_region.show(new HeaderView),App.footer_region.show(new FooterView)}),App.addInitializer(function(){App.AppRouter=new Router,Backbone.history.start()}),App.start();